# 零基础项目实训（第24节课）

## 活动

新建：insert ，审核（活动状态，已发布，未发布），

编辑：（已发布的活动），修改点的对比。

​		修改活动，存两条记录。修改多次，多条记录。  活动修改记录表。

删除：逻辑删除。（delete_flag=1），除非用户注销。

复制活动：



## 订单计算

购物车，下订单。

最优原则。A10，B20，  B活动。



# 优惠券

时间周期，指定商品，特定金额，

作用：当钱使用。

目的：促销。提高了xxx销量。



京东图书和当当，被人薅羊毛，2亿元。



商品：富裕的人卖1w，穷一些的卖9k，。 优惠券来源。（复杂的规则）。

比价。



## 类型

### 门槛：

现金券，满减券，折扣券

### 范围：

单品券，品类券（3c），品牌券（iPhone）

### 发放的主体：

平台优惠券（注册，兑换，消费送券），（店铺优惠券）。



## 优惠券信息

名称，面值，使用条件，使用平台（pc，app端，微信端），有效期（固定有效期，相对有效期（领券之日起 x天有效）），发行量（10万张）





**角色：分析某个实体，哪个角色影响这个实体，还有就是 实体影响了 哪个角色？**

**优惠券表。 表代表：信息。（使用角色：平台，使用者）。**

**已领（个人）优惠券表。** 







关联表（10万个数据，）  用户表   优惠券表：    关联表 如果用 相对有效期的话，需要承载业务信息。



0点过期，5分钟，（0-0:5），给业务带啦不便。

实时时间段查询：下单的那一刻（校验有效期）





# 制券

写：**优惠券表**



# 发券

用户，主动领。

平台主动发。（效果并不好）

大客户团购：



防作弊机制：2亿。数量限制。封掉你。



# 用券

把券干掉。



使用了。

券自己过期了。



# 返还机制

简单粗暴：不还。

退券。（1-7 券的有效期，7号买了东西，9号退货，券怎么办？）。







# 不要追求100%灵活

和业务固定的 概念或者 类型，硬编码也无妨。



增加一个类型，A，B，C，D，A忌口：不吃面，B忌口：不吃米。C：不吃xiang

特别结构化的 数据。不要写死。



包：大礼包。新人大礼包。



---

优惠券名字，优惠券规则，都可以冗余。











